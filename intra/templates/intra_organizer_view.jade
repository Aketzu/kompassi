extends "core_admin_base.jade"
- load i18n
block title
  {% trans "Teams and organizers" %}
block admin_content
  h3 {% trans "Teams and organizers" %}
  for team in teams
    .panel.panel-default
      .panel-heading: strong {{ team.name }}

      if team.description
        .panel-body {{ team.description|safe|linebreaks }}

      if team.members.exists
        table.table.table-striped
          thead
            tr
              th {% trans "Surname" %}
              th {% trans "First name" %}
              th {% trans "Nick name" %}
              th {% trans "Job title" %}
              th {% trans "E-mail address" %}
              th {% trans "Phone number" %}
              if is_intra_admin
                th
          tbody
            for team_member in team.members.all
              tr(class='{{ team_member.css_classes }}')
                td= team_member.person.surname
                td= team_member.person.first_name
                td= team_member.person.nick
                td= team_member.signup.job_title
                td= team_member.person.email
                td= team_member.person.normalized_phone_number
                if is_intra_admin
                  td
                    include intra_admin_team_member_actions.jade
        .panel-footer.clearfix
          include intra_admin_team_actions.jade
          p.text-muted
            {% blocktrans count num_members=team.members.count %}One member.{% plural %}{{ num_members }} members.{% endblocktrans %}
      else
        .panel-footer.clearfix
          include intra_admin_team_actions.jade
          p.text-muted {% trans "This team has no members." %}

  if unassigned_organizers
    .panel.panel-danger
      .panel-heading: strong {% trans "Unassigned organizers" %}
      .panel-body {% trans "These organizers have not yet been assigned to a team." %}

      table.table.table-striped
        thead
          tr
            th {% trans "Surname" %}
            th {% trans "First name" %}
            th {% trans "Nick name" %}
            th {% trans "Job title" %}
            th {% trans "E-mail address" %}
            th {% trans "Phone number" %}
            if is_intra_admin
              th
        tbody
          for unassigned_organizer in unassigned_organizers
            tr
              td= unassigned_organizer.person.surname
              td= unassigned_organizer.person.first_name
              td= unassigned_organizer.person.nick
              td= unassigned_organizer.signup.job_title
              td= unassigned_organizer.person.email
              td= unassigned_organizer.person.normalized_phone_number
              if is_intra_admin
                td
                  .btn-group
                    a.btn.btn-xs.btn-success(
                      href='{% url "intra_admin_member_add_team_view" event.slug unassigned_organizer.person.id %}'
                      title='{% trans "Assign this organizer to a team…" %}'
                    )
                      i.fa.fa-user-plus

      .panel-footer.clearfix
        p.text-muted
          {% blocktrans count num_members=num_unassigned_organizers %}One unassigned organizer.{% plural %}{{ num_members }} unassigned organizer.{% endblocktrans %}
